<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Creates an xpose.data object."><title>Create an Xpose data object — xpose.data • xpose4</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create an Xpose data object — xpose.data"><meta property="og:description" content="Creates an xpose.data object."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">xpose4</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.7.2.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/UUPharmacometrics/xpose4/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create an Xpose data object</h1>
      <small class="dont-index">Source: <a href="https://github.com/UUPharmacometrics/xpose4/blob/HEAD/R/xpose.data.R" class="external-link"><code>R/xpose.data.R</code></a></small>
      <div class="d-none name"><code>xpose.data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates an <code>xpose.data</code> object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">xpose.data</span><span class="op">(</span></span>
<span>  <span class="va">runno</span>,</span>
<span>  tab.suffix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  sim.suffix <span class="op">=</span> <span class="st">"sim"</span>,</span>
<span>  cwres.suffix <span class="op">=</span> <span class="st">""</span>,</span>
<span>  directory <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  table.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sdtab"</span>, <span class="st">"mutab"</span>, <span class="st">"patab"</span>, <span class="st">"catab"</span>, <span class="st">"cotab"</span>, <span class="st">"mytab"</span>, <span class="st">"extra"</span>, <span class="st">"xptab"</span>,</span>
<span>    <span class="st">"cwtab"</span><span class="op">)</span>,</span>
<span>  cwres.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cwtab"</span><span class="op">)</span>,</span>
<span>  mod.prefix <span class="op">=</span> <span class="st">"run"</span>,</span>
<span>  mod.suffix <span class="op">=</span> <span class="st">".mod"</span>,</span>
<span>  phi.suffix <span class="op">=</span> <span class="st">".phi"</span>,</span>
<span>  phi.file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nm7 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>runno</dt>
<dd><p>Run number of the table files to read.</p></dd>


<dt>tab.suffix</dt>
<dd><p>Suffix to be appended to the table file names for the 
"real" data.</p></dd>


<dt>sim.suffix</dt>
<dd><p>Suffix to be appended to the table file names for any 
simulated data.</p></dd>


<dt>cwres.suffix</dt>
<dd><p>Suffix to be appended to the table file names for any 
CWRES data.</p></dd>


<dt>directory</dt>
<dd><p>Where the files are located.</p></dd>


<dt>quiet</dt>
<dd><p>A logical value indicating if more diagnostic messages should be
printed when running this function.</p></dd>


<dt>table.names</dt>
<dd><p>Default text that Xpose looks for when searching for table
files.</p></dd>


<dt>cwres.name</dt>
<dd><p>default text that xpose looks for when searching for CWRES 
table files.</p></dd>


<dt>mod.prefix</dt>
<dd><p>Start of model file name.</p></dd>


<dt>mod.suffix</dt>
<dd><p>End of model file name.</p></dd>


<dt>phi.suffix</dt>
<dd><p>End of .phi file name.</p></dd>


<dt>phi.file</dt>
<dd><p>The name of the .phi file. If not <code>NULL</code> then supersedes
<code>paste(mod.prefix,runno,phi.suffix,sep="")</code>.</p></dd>


<dt>nm7</dt>
<dd><p><code>T/F</code> if table files are for NONMEM 7/6, NULL for undefined.</p></dd>


<dt>...</dt>
<dd><p>Extra arguments passed to function.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An <code>xpose.data</code> object.  Default values for this object are 
  created from a file called 'xpose.ini'.  This file can be found in the root
  directory of the 'xpose4' package:</p>
<p></p>
<p><code>system.file("xpose.ini",package="xpose4")</code>.</p>
  
  

<p>It can be modified to fit the users 
  wants and placed in the home folder of the user or the working directory, 
  to override default settings.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Xpose expects, by default, to find at least one the the following NONMEM 
tables in the working directory to be able to create an Xpose data object 
(using a run number of '5' as an example):</p>
<p>sdtab5: The 'standard' parameters, including IWRE, IPRE, TIME, and the NONMEM
default items (DV, PRED, RES and WRES) that are added when NOAPPEND is not 
present in the <code>$TABLE</code> record.</p>
<p><code>$TABLE ID TIME IPRE IWRE NOPRINT ONEHEADER FILE=sdtab5</code></p>
<p>patab5: The empirical Bayes estimates of individual model parameter values, 
or posthoc estimates. These are model parameters, such as CL, V2, ETA1, etc.</p>
<p><code>$TABLE ID CL V2 KA K F1 ETA1 ETA2 ETA3 NOPRINT NOAPPEND ONEHEADER 
FILE=patab5 </code></p>
<p>catab5: Categorical covariates, e.g. SEX, RACE.</p>
<p><code>$TABLE ID SEX HIV GRP NOPRINT NOAPPEND ONEHEADER FILE=catab5 </code></p>
<p>cotab5: Continuous covariates, e.g. WT, AGE.</p>
<p><code>$TABLE ID WT AGE BSA HT GGT HB NOPRINT NOAPPEND ONEHEADER FILE=cotab5</code></p>
<p>mutab5, mytab5, extra5, xptab5: Additional variables of any kind. These might
be useful if there are more covariates than can be accommodated in the 
covariates tables, for example, or if you have other variables that should be
added, e.g. CMAX, AUC.</p>
<p>The default names for table files can be changed by changing the default 
values to the function.  The files that Xpose looks for by default are:</p>
<p><code> paste(table.names, runno, tab.suffix, sep="") </code></p>
<p>The default CWRES table file name is called:</p>
<p><code>paste(cwres.name,runno,cwres.suffix,tab.suffix,sep="")</code></p>
<p>If there are simulation files present then Xpose looks for the files to be 
named:</p>
<p><code>paste(table.names, runno, sim.suffix, tab.suffix, sep="")</code> 
<code>paste(cwres.name,runno,sim.suffix,cwres.suffix,tab.suffix,sep="") </code></p>

<p>This is basically a wrapper function for the <code>read.nm.tables</code>, 
<code>Data</code> and <code>SData</code> functions. See them for further information.</p>
<p>Also reads in the .phi file associated with the run (Individual OFVs, 
parameters, and variances of those parameters.)</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="xpose.data-class.html">xpose.data-class</a></code>, <code><a href="data_extract_or_assign.html">Data</a></code>, 
  <code><a href="data_extract_or_assign.html">SData</a></code>, <code><a href="read.nm.tables.html">read.nm.tables</a></code>, 
  <code><a href="compute.cwres.html">compute.cwres</a></code></p>
<p>Other data functions: 
<code><a href="add_transformed_columns.html">add_transformed_columns</a></code>,
<code><a href="change_graphical_parameters.html">change_graphical_parameters</a></code>,
<code><a href="change_misc_parameters.html">change_misc_parameters</a></code>,
<code><a href="compute.cwres.html">compute.cwres</a>()</code>,
<code><a href="data.checkout.html">data.checkout</a>()</code>,
<code><a href="data_extract_or_assign.html">data_extract_or_assign</a></code>,
<code><a href="db.names.html">db.names</a>()</code>,
<code><a href="export.graph.par.html">export.graph.par</a>()</code>,
<code><a href="export.variable.definitions.html">export.variable.definitions</a>()</code>,
<code><a href="import.graph.par.html">import.graph.par</a>()</code>,
<code><a href="import.variable.definitions.html">import.variable.definitions</a>()</code>,
<code><a href="make.sb.data.html">make.sb.data</a>()</code>,
<code><a href="nsim.html">nsim</a>()</code>,
<code><a href="par_cov_summary.html">par_cov_summary</a></code>,
<code><a href="read.TTE.sim.data.html">read.TTE.sim.data</a>()</code>,
<code><a href="read.nm.tables.html">read.nm.tables</a>()</code>,
<code><a href="read_NM_output.html">read_NM_output</a></code>,
<code><a href="read_nm_table.html">read_nm_table</a>()</code>,
<code><a href="simprazExample.html">simprazExample</a>()</code>,
<code><a href="tabulate.parameters.html">tabulate.parameters</a>()</code>,
<code><a href="xlabel.html">xlabel</a>()</code>,
<code><a href="xpose.print.html">xpose.print</a>()</code>,
<code><a href="xpose4-package.html">xpose4-package</a></code>,
<code><a href="xsubset.html">xsubset</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Niclas Jonsson, Andrew Hooker</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Here we create files from an example NONMEM run</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="va">od</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co"># move to a temp directory</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">cur.files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co"># current files in temp directory</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "bslib-7c42df2bb75bd1f67adf8ee02b967aa8"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2] "downlit"                               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "file1cf578ef749a"                      </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="simprazExample.html">simprazExample</a></span><span class="op">(</span>overwrite<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="co"># write files</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">new.files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="op">!</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">cur.files</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>  <span class="co"># what files are new here?</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "run1.ext"    "run1.lst"    "run1.mod"    "simpraz.dta" "xptab1"     </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">xpdb</span> <span class="op">&lt;-</span> <span class="fu">xpose.data</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Looking for NONMEM table files.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Reading ./xptab1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table files read.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Looking for NONMEM simulation table files.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> No simulated table files read.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="va">new.files</span><span class="op">)</span> <span class="co"># remove these files</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE TRUE TRUE TRUE TRUE</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="va">od</span><span class="op">)</span>  <span class="co"># restore working directory</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We expect to find the required NONMEM run and table files for run</span></span></span>
<span class="r-in"><span><span class="co"># 5 in the current working directory, and that the table files have</span></span></span>
<span class="r-in"><span><span class="co"># a suffix of '.dat', e.g. sdtab5.dat</span></span></span>
<span class="r-in"><span><span class="va">xpdb5</span> <span class="op">&lt;-</span> <span class="fu">xpose.data</span><span class="op">(</span><span class="fl">5</span>, tab.suffix <span class="op">=</span> <span class="st">".dat"</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://katalog.uu.se/profile/?id=N4-631" class="external-link">Andrew C. Hooker</a>, Mats O. Karlsson, Justin J. Wilkins, E. Niclas Jonsson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

